---
layout: default
title: Ruby 02
permalink: /ruby/02/
---

# Ruby 02
Tutor: Rafael Fernandes

---

## Convenções e Estruturas Primitivas

---

### Comentários

#### Simples
```ruby
# Este é um comentário simples
```

#### Blocos
```ruby
=begin
    Este é
    um comentário
    em bloco
=end
```
---

### Tipos de Dados

```ruby
# booleano
verdadeiro = true
falso = false

# inteiro
idade = 20
habitantes = 5_000_000

# real
altura = 1.82

# strings
nome = 'Fred'

# simbolos
funcionalidade = :criar_cargo

```

---

### Declaração em Paralelo

```ruby
a = 2
b = 3
c = 5

a, b, c = 2, 3, 5
```

---

### Strings vs Símbolos

```bash
$ irb
irb(main):001:0> 'Rafael'.object_id == 'Rafael'.object_id
=> false
irb(main):002:0> :rafael.object_id == :rafael.object_id
=> true
```

---

Um símbolo não é sobre o **que** é, mas sim **quem** é.

O método `object_id` retorna a identidade de um objeto (posição do objeto na memória, em geral).

---

Quando comparamos as identidades das duas strings 'Rafael', elas são alocadas primeiro e possuem identificadores diferentes.

O mesmo não acontece com o símbolo, ele é único na memória, logo possui o mesmo identificador.

---

Utilizamos símbolos em Ruby quando queremos acessar funcionalidades únicas de uma aplicação, também no acesso a uma chave de um hash.

```ruby
options[:auto_save] = true
options[:length] = 35
```

---

### Tipos de variáveis

```ruby
# locais
idade = 42

# de instância
@estado = 'DF'

# de classe
@@membros = 23

# globais
$versao = 2

# constantes
PI = 3.14159
``` 
---

## Entrada e Saída de Dados

---

### Entrada

```ruby
# lê do teclado, retira o caracter de fim de linha e armazena em nome
nome = gets.chomp
```

---

### Saída

```ruby
nome = 'Rafael'

# Imprime sem pular linha
print nome

# Imprime e pula linha
puts nome

```

---

### Conversão de tipos

```ruby
# para string
object.to_s

# para inteiro
object.to_i

# para real
object.to_f

# para símbolo
object.to_sym
```
---

Verifique se o método pode ser usado no objeto com:

```ruby
object.respond_to? :method

# Exemplo:
5.respond_to? :to_s
# => true
```
---

### Imprimindo strings

```ruby
nome = 'Rafael'
idade = 20

puts "Meu nome é " + nome + "e tenho " + idade.to_s + " anos"
# => "Meu nome é Rafael e tenho 20 anos"
```
---

Para não ter que usar concatenação e conversores de tipo, utilizamos a interpolação:

```ruby
nome = 'Rafael'
idade = 20

puts "Meu nome é #{nome} e eu tenho #{idade} anos"
# => "Meu nome é Rafael e tenho 20 anos"
```

---

### Operadores de Comparação

```ruby
# igual a
5 == 4

# diferente de
1 != 1

# maior que
6 > 8

# menor que
2 < 3

# maior ou igual que
8 >= 3

# menor ou igual que
2 <= 2
```
---

### Operadores Booleanos

```ruby
# negação
not true
!false

# conjunção
true and false
true && false

# disjunção
true or true
true || true
```

---

### Operadores Aritméticos

```ruby
# soma
a + b

# subtração
a - b

# multiplicação
a * b

# exponenciação
a ** b

# divisão
a / b

# módulo
a % b
```
---

## Exercício

https://www.urionlinejudge.com.br/judge/pt/problems/view/1015, adaptado

Solicite ao usuário que entre com os quatro valores correspondentes aos eixos x e y de dois pontos quaisquer no plano, p1(x1,y1) e p2(x2,y2) e calcule a distância entre eles, mostrando 4 casas decimais após a vírgula, segundo a fórmula:

Distancia = ![raiz[(x2-x1)²-(y2-y1)²]](https://urionlinejudge.r.worldssl.net/gallery/images/problems/UOJ_1015.png)

| Exemplos de Entrada  | Exemplos de Saída |
|----------------------|-------------------|
| (1.0, 7.0), (5.0, 9.0)    | 4.4721            |
| (-2.5, 0.4), (12.1, 7.3)   | 16.1484           |
| (2.5, -0.4), (-12.2, 7.0) | 16.4575           |

---

### Resposta (para consulta!)

```ruby
include Math

print "Digite o valor de x1: "
x1 = gets.chomp.to_f

print "Digite o valor de y1: "
y1 = gets.chomp.to_f

print "Digite o valor de x2: "
x2 = gets.chomp.to_f

print "Digite o valor de y2: "
y2 = gets.chomp.to_f

distancia = Math.sqrt((x2-x1) ** 2 + (y2-y1) ** 2).round(4)

puts "Distância = #{distancia}"
```

---

## Estruturas Condicionais

---

### if

```ruby
if expressao_condicional
    # faz algo
end
```

---

```ruby
pudim = true

if pudim
    puts "Rodrigo aprova"
end
```

---

### Syntax Sugar

Você pode substituir

```ruby
if pudim
    puts "Rodrigo aprova"
end
```

por

```ruby
puts "Rodrigo aprova" if pudim
```

por exemplo, rs.

---

### unless

O código dentro do escopo de `unless` só será executado se a condição for falsa.

Entenda o `unless` como um  `if not`:

```ruby
unless pudim
    puts "Rodrigo não aprova"
end

if not pudim
    puts "Rodrigo não aprova"
end
```

---

### elsif e else

```ruby
x = 5

if x >= 0 and x < 3
    puts "x está entre 0 (inclusive) e 3"
elsif x >= 3 and x < 6
    puts "x está entre 3 (inclusive) e 6"
else
    puts "NDA"
end
```

---

### Operador Ternário

```ruby
pudim = true

puts pudim ? "Rodrigo aprova" : "Rodrigo não aprova"
```

---

### case

Semelhante ao `switch` da linguagem C.

```ruby
comida = 'Pudim'

case comida
    when 'Pudim'
        puts "Rodrigo aprova"
    when 'Salgados'
        puts "Rafael aprova"
    when 'Lasanha'
        puts "Fred aprova"
    else
        puts "oi?"
    end
end
```

---

## Exercício

https://www.urionlinejudge.com.br/judge/pt/problems/view/1036

Leia 3 valores de ponto flutuante e efetue o cálculo das raízes da equação de Bhaskara. Se não for possível calcular as raízes, mostre a mensagem correspondente “Impossivel calcular”, caso haja uma divisão por 0 ou raiz de numero negativo.

### Entrada

Leia três valores de ponto flutuante (double) A, B e C.

### Saída

Se não houver possibildade de calcular as raízes, apresente a mensagem "Impossivel calcular". Caso contrário, imprima o resultado das raízes com 5 dígitos após o ponto, com uma mensagem correspondente conforme exemplo abaixo. Imprima sempre o final de linha após cada mensagem.

---

### Ex: entradas e saídas
10.0 20.1 5.1
R1 = -0.29788
R2 = -1.71212

0.0 20.0 5.0
Impossivel calcular

10.3 203.0 5.0
R1 = -0.02466
R2 = -19.68408

10.0 3.0 5.0
Impossivel calcular
---

## Estruturas de Repetição

---

### Método times

```ruby
5.times do
    puts "Oi!"
end
```

---

### for

```ruby
for i in 1..10
    puts i
end
```

`1..10` é um range

---

### while

```ruby
i = 0

while i < 10
    puts i
    i += 1
end
```

---

### while

```ruby
i = 0

begin
    puts i
    i += 1
end while i < 10
```

---

### until

```ruby

i = 0

until i >= 10
    puts i
    i += 1
end
```

---

### until

```ruby

i = 0

begin
    puts i
    i += 1
end until i >= 10
```

---

### each

```ruby
(1..5).each do |i|
    puts i
end
```

---

### break, next

```ruby
(1..5).each do |i|
    break if i > 3
    puts i
end

(1..5).each do |i|
    next if i < 2
    puts i
end
```

---

### redo

```ruby
(1..3).each do |i|
  if i.eql? 2
    print i
    redo
  end
end
```

---

## Exercício

Solicite ao usuário que entre com dois números inteiros, calcule a soma dos números ímpares e exiba na tela.

---

### Resposta (para consulta!)

```ruby
print "Digite o primeiro número: "
x = gets.chomp.to_i

print "Digite o segundo número: "
y = gets.chomp.to_i

soma = 0

if x > y
  z = y
  y = x
  x = z
end

(x..y).each do |i|
  soma += i if i.odd?
end

puts "Soma: #{soma}"
```